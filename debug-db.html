<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Database</title>
</head>
<body>
    <div id="app">
        <h1>Database Debug</h1>
        <div id="results"></div>
    </div>
    <script type="module">
        import { supabase } from './src/services/supabase.ts';

        async function debugDatabase() {
            const results = document.getElementById('results');

            try {
                // Check if product_lines_default_options table exists
                console.log('üîç Checking product_lines_default_options table...');

                const { data: defaultOptions, error: defaultError } = await supabase
                    .from('product_lines_default_options')
                    .select('*')
                    .limit(10);

                if (defaultError) {
                    console.error('‚ùå Error querying product_lines_default_options:', defaultError);
                    results.innerHTML += `<p>‚ùå Error: ${defaultError.message}</p>`;
                } else {
                    console.log('‚úÖ product_lines_default_options data:', defaultOptions);
                    results.innerHTML += `<p>‚úÖ Found ${defaultOptions.length} default option records</p>`;
                    results.innerHTML += `<pre>${JSON.stringify(defaultOptions, null, 2)}</pre>`;
                }

                // Check specific Deco product line (ID 19)
                console.log('üîç Checking Deco product line default options...');

                const { data: decoDefaults, error: decoError } = await supabase
                    .from('product_lines_default_options')
                    .select('*')
                    .eq('product_lines_id', 19);

                if (decoError) {
                    console.error('‚ùå Error querying Deco defaults:', decoError);
                    results.innerHTML += `<p>‚ùå Deco Error: ${decoError.message}</p>`;
                } else {
                    console.log('‚úÖ Deco default options:', decoDefaults);
                    results.innerHTML += `<p>‚úÖ Deco has ${decoDefaults.length} default option records</p>`;
                    results.innerHTML += `<pre>${JSON.stringify(decoDefaults, null, 2)}</pre>`;
                }

                // Check product_lines table
                console.log('üîç Checking product_lines table...');

                const { data: productLines, error: plError } = await supabase
                    .from('product_lines')
                    .select('*')
                    .eq('id', 19);

                if (plError) {
                    console.error('‚ùå Error querying product_lines:', plError);
                } else {
                    console.log('‚úÖ Deco product line:', productLines);
                    results.innerHTML += `<p>‚úÖ Deco product line data:</p>`;
                    results.innerHTML += `<pre>${JSON.stringify(productLines, null, 2)}</pre>`;
                }

            } catch (error) {
                console.error('‚ùå Database debug error:', error);
                results.innerHTML += `<p>‚ùå Error: ${error.message}</p>`;
            }
        }

        debugDatabase();
    </script>
</body>
</html>