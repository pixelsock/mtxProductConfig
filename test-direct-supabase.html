<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Direct Supabase Test</title>
</head>
<body>
    <h1>Direct Supabase Test</h1>
    <button id="testBtn">Test Default Options Loading</button>
    <pre id="output"></pre>

    <script type="module">
        async function testDefaultOptions() {
            const output = document.getElementById('output');
            output.textContent = 'Testing...';

            try {
                // Import supabase client directly
                const { supabase } = await import('./src/services/supabase.ts');

                console.log('🔧 Testing default options loading...');

                // Test loading default options for Deco product line (ID 19)
                const { data: defaultOptions, error } = await supabase
                    .from('product_lines_default_options')
                    .select('*')
                    .eq('product_lines_id', 19);

                if (error) {
                    console.error('❌ Error:', error);
                    output.textContent = `Error: ${JSON.stringify(error, null, 2)}`;
                } else {
                    console.log('✅ Success:', defaultOptions);

                    const collections = [...new Set(defaultOptions.map(opt => opt.collection))];

                    const result = {
                        success: true,
                        totalRecords: defaultOptions.length,
                        collections: collections,
                        sampleRecords: defaultOptions.slice(0, 5)
                    };

                    output.textContent = JSON.stringify(result, null, 2);
                }

            } catch (error) {
                console.error('❌ Test error:', error);
                output.textContent = `Test Error: ${error.message}`;
            }
        }

        document.getElementById('testBtn').addEventListener('click', testDefaultOptions);

        // Auto-run on load
        window.addEventListener('load', () => {
            setTimeout(testDefaultOptions, 500);
        });
    </script>
</body>
</html>